<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Admin - SMK Jakarta Timur 1</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dashboard-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header Dashboard Admin -->
        <div class="dashboard-header">
            <div class="header-left">
                <h1><i class="fas fa-user-shield"></i> Dashboard Admin</h1>
                <p class="subtitle">Administrator Sistem</p>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="avatar">
                        <i class="fas fa-user-cog"></i>
                    </div>
                    <div class="user-details">
                        <strong id="userFullName">Administrator</strong>
                        <small>Super Admin</small>
                    </div>
                </div>
                <div class="date-time">
                    <i class="far fa-calendar-alt"></i>
                    <span id="currentDate">Hari, Tanggal</span>
                </div>
                <div class="admin-controls">
                    <button class="btn-admin-control" onclick="openAdminPanel()">
                        <i class="fas fa-cog"></i> Admin Panel
                    </button>
                    <button class="btn-logout" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>

        <!-- System Overview -->
        <div class="system-overview">
            <div class="system-stat">
                <div class="stat-header">
                    <i class="fas fa-users"></i>
                    <h3>Users</h3>
                </div>
                <div class="stat-details">
                    <div class="stat-item">
                        <span class="stat-label">Siswa</span>
                        <span class="stat-value" id="totalSiswaAdmin">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Guru</span>
                        <span class="stat-value" id="totalGuruAdmin">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Admin</span>
                        <span class="stat-value" id="totalAdmin">1</span>
                    </div>
                </div>
            </div>

            <div class="system-stat">
                <div class="stat-header">
                    <i class="fas fa-calendar-alt"></i>
                    <h3>Presensi Hari Ini</h3>
                </div>
                <div class="stat-details">
                    <div class="stat-item">
                        <span class="stat-label">Hadir</span>
                        <span class="stat-value stat-success" id="presensiHadir">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Terlambat</span>
                        <span class="stat-value stat-warning" id="presensiTerlambat">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Izin/Sakit</span>
                        <span class="stat-value stat-info" id="presensiIzin">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Alpha</span>
                        <span class="stat-value stat-danger" id="presensiAlpha">0</span>
                    </div>
                </div>
            </div>

            <div class="system-stat">
                <div class="stat-header">
                    <i class="fas fa-chart-pie"></i>
                    <h3>Statistik</h3>
                </div>
                <div class="stat-details">
                    <div class="stat-item">
                        <span class="stat-label">Total Presensi</span>
                        <span class="stat-value" id="totalPresensiAdmin">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Mapel</span>
                        <span class="stat-value" id="totalMapelAdmin">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Kehadiran</span>
                        <span class="stat-value stat-success" id="rataKehadiran">0%</span>
                    </div>
                </div>
            </div>

            <div class="system-stat">
                <div class="stat-header">
                    <i class="fas fa-network-wired"></i>
                    <h3>System Status</h3>
                </div>
                <div class="stat-details">
                    <div class="stat-item">
                        <span class="stat-label">Presensi Session</span>
                        <span class="stat-value" id="presensiSessionStatus">Closed</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Online Users</span>
                        <span class="stat-value stat-success" id="onlineUsers">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Server Load</span>
                        <span class="stat-value" id="serverLoad">Normal</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="dashboard-content">
            <!-- Quick Actions -->
            <div class="dashboard-section">
                <div class="section-header">
                    <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
                </div>
                <div class="quick-actions">
                    <button class="quick-action" onclick="openPresensiSession()">
                        <i class="fas fa-unlock"></i>
                        <span>Buka Presensi</span>
                    </button>
                    <button class="quick-action" onclick="closePresensiSession()">
                        <i class="fas fa-lock"></i>
                        <span>Tutup Presensi</span>
                    </button>
                    <button class="quick-action" onclick="addSchedule()">
                        <i class="fas fa-calendar-plus"></i>
                        <span>Tambah Jadwal</span>
                    </button>
                    <button class="quick-action" onclick="addUser()">
                        <i class="fas fa-user-plus"></i>
                        <span>Tambah User</span>
                    </button>
                    <button class="quick-action" onclick="exportReport()">
                        <i class="fas fa-file-export"></i>
                        <span>Export Report</span>
                    </button>
                    <button class="quick-action" onclick="openSettings()">
                        <i class="fas fa-cogs"></i>
                        <span>System Settings</span>
                    </button>
                </div>
            </div>

            <!-- Presensi Chart -->
            <div class="dashboard-section full-width">
                <div class="section-header">
                    <h2><i class="fas fa-chart-bar"></i> Statistik Presensi (7 Hari)</h2>
                    <select id="chartFilter" class="form-input-sm">
                        <option value="all">Semua Status</option>
                        <option value="hadir">Hadir</option>
                        <option value="terlambat">Terlambat</option>
                        <option value="izin">Izin</option>
                        <option value="sakit">Sakit</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="presensiChart"></canvas>
                </div>
            </div>

            <!-- Recent Activities -->
            <div class="dashboard-section">
                <div class="section-header">
                    <h2><i class="fas fa-history"></i> Recent Activities</h2>
                    <button class="btn-action" onclick="refreshActivities()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
                <div class="activities-timeline" id="adminActivitiesTimeline">
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">System initialized</div>
                            <div class="activity-time">Baru saja</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Notifications -->
            <div class="dashboard-section">
                <div class="section-header">
                    <h2><i class="fas fa-bell"></i> System Notifications</h2>
                    <button class="btn-action btn-secondary" onclick="clearNotifications()">
                        <i class="fas fa-trash"></i> Clear All
                    </button>
                </div>
                <div class="notifications-list" id="systemNotifications">
                    <div class="notification-item notification-info">
                        <i class="fas fa-info-circle"></i>
                        <div class="notification-content">
                            <h4>Sistem Aktif</h4>
                            <p>Sistem presensi digital berjalan normal</p>
                            <small>Baru saja</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="dashboard-admin.js"></script>
    <script src="admin.js"></script>
    <script>
        function logout() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('currentRole');
            window.location.href = 'index.html';
        }

        function openAdminPanel() {
            window.location.href = 'admin-panel.html';
        }

        function openPresensiSession() {
            if (window.adminPanel) {
                adminPanel.openPresensiSession();
            }
        }

        function closePresensiSession() {
            if (window.adminPanel) {
                adminPanel.closePresensiSession();
            }
        }
    </script>
</body>
</html>
